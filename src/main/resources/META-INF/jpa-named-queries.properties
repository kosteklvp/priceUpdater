Players2Matchdays.getPriceChangesByMatchday=SELECT t.playerName, t.clubName, t.value9, t.value10, (t.value10 - t.value9) AS priceChange FROM (SELECT player.name as playerName, club.name as clubName, (SELECT players2matchdays.valueThen FROM players2matchdays WHERE players2matchdays.matchdayID = :#{#matchday.id} AND player.ID = players2matchdays.playerID) AS value10, (SELECT players2matchdays.valueThen FROM players2matchdays WHERE players2matchdays.matchdayID = :#{#matchday.id} - 1 AND player.ID = players2matchdays.playerID) AS value9 FROM player inner join club on player.clubID = club.ID) AS t WHERE t.value10 - t.value9 <> 0 ORDER BY ABS(priceChange) DESC , clubName